
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>RBDReference index &#8212; GRiD 1.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=adefdd50" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=8d563738"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api_reference/rbd';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="URDFParser" href="urdf.html" />
    <link rel="prev" title="API Reference" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/a2r_lab.jpg" class="logo__image only-light" alt="GRiD 1.0.0 documentation - Home"/>
    <img src="../_static/a2r_lab.jpg" class="logo__image only-dark pst-js-only" alt="GRiD 1.0.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/landing_page.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribution_guidelines.html">
    Contributing to Project
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sphinx_edit_guide.html">
    Editing Sphinx Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../faq.html">
    FAQ and Bug Fixes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../todo_list.html">
    Fall 2024 Tasks!
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/kawotwi/GRiD" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/landing_page.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribution_guidelines.html">
    Contributing to Project
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sphinx_edit_guide.html">
    Editing Sphinx Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../faq.html">
    FAQ and Bug Fixes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../todo_list.html">
    Fall 2024 Tasks!
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/kawotwi/GRiD" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">RBDReference index</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="urdf.html">URDFParser</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="gridcodegen.html">GRiDCodeGenerator index</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">RBDReference index</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="rbdreference-index">
<h1>RBDReference index<a class="headerlink" href="#rbdreference-index" title="Link to this heading">#</a></h1>
<p>A Python reference implementation of rigid body dynamics algorithms.</p>
<p>This package is designed to enable rapid prototyping and testing of new
algorithms and algorithmic optimizations. If your favorite rigid body
dynamics algorithm is not yet implemented please submit a PR with the
implementation. Weâ€™ll then try to get a GPU, FPGA, and/or accelerator
implementation designed as soon as possible.</p>
<section id="usage-and-api">
<h2>Usage and API:<a class="headerlink" href="#usage-and-api" title="Link to this heading">#</a></h2>
<p>This package relies on an already parsed <code class="docutils literal notranslate"><span class="pre">robot</span></code> object from our
<a class="reference external" href="https://github.com/robot-acceleration/URDFParser">URDFParser</a>
package.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RBDReference</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="o">.</span><span class="n">ALGORITHM</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
<p>Currently implemented algorithms include the: + Recursive Newton Euler
Algorithm (RNEA):
<code class="docutils literal notranslate"><span class="pre">(c,v,a,f)</span> <span class="pre">=</span> <span class="pre">rbdReference.rnea(q,</span> <span class="pre">qd,</span> <span class="pre">qdd</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">GRAVITY</span> <span class="pre">=</span> <span class="pre">-9.81)</span></code> +
The Gradient of the RNEA:
<code class="docutils literal notranslate"><span class="pre">dc_du</span> <span class="pre">=</span> <span class="pre">rnea_grad(q,</span> <span class="pre">qd,</span> <span class="pre">qdd</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">GRAVITY</span> <span class="pre">=</span> <span class="pre">-9.81)</span></code> where
<code class="docutils literal notranslate"><span class="pre">dc_du</span> <span class="pre">=</span> <span class="pre">np.hstack((dc_dq,dc_dqd))</span></code> + The Direct Inverse of the Mass
Matrix Algorithm: <code class="docutils literal notranslate"><span class="pre">Minv</span> <span class="pre">=</span> <span class="pre">rbdReference.minv(q,</span> <span class="pre">output_dense</span> <span class="pre">=</span> <span class="pre">True)</span></code> +
The Composite Rigid Body Algorithm: <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">=</span> <span class="pre">rbdReference.crba(q,qd)</span></code></p>
<p>We also include functions that break these algorithms down into there
different passes and by their output types (dq vs dqd) to enable easier
testing of downstream GPU, FPGA, and accelerator implementations.</p>
</section>
<section id="testing-algorithms-on-urdfs">
<h2>Testing Algorithms on URDFs<a class="headerlink" href="#testing-algorithms-on-urdfs" title="Link to this heading">#</a></h2>
<p>Run the following in terminal from forked repo here at base of the GRiD
working directory in the floating base branch. Run any URDF tests by
replacing the desired urdf with the terminal scripts below.</p>
<p>iiwa14.urdf testing <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">printReferenceValues.py</span> <span class="pre">iiwa.urdf</span> <span class="pre">-f</span></code></p>
<p>This runs the print printReferenceValues.py script located
<a class="github reference external" href="https://github.com/A2R-Lab/GRiD/blob/floating-base/printReferenceValues.py">A2R-Lab/GRiD</a>.
This will output values for <code class="docutils literal notranslate"><span class="pre">RNEA</span></code>, <code class="docutils literal notranslate"><span class="pre">Minv</span></code>, <code class="docutils literal notranslate"><span class="pre">CRBA</span></code>, <code class="docutils literal notranslate"><span class="pre">RNEA_grad</span></code>,
and more.</p>
<p>Once can test algorithm outputs using Matlab Spatial V2 using the
following sequence:
1. Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">compare_rnea_fb_spatial.py</span> <span class="pre">INSERT_URDF.urdf</span> <span class="pre">-f</span></code> which will
print the exact q, qd, qdd inputs for Spatial V2 floating base
algorithms. (Matlab expects floating base joint to input quaternion xyzw
and xyz location of Fb joint)</p>
<p>2. After generating compatible inputs with
Matlab, create a floating base URDF.m file by running
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">generate_spatial_model.py</span> <span class="pre">INSERT_URDF.urdf</span> <span class="pre">-f</span></code>.</p>
<p>3. Place the
newly generated <code class="docutils literal notranslate"><span class="pre">URDF.m</span></code> file in the working directory of
spatial_v2_extended.</p>
<p>4. Run the script after ensuring spatial
directories are sourced correctly.</p>
<p>5. Suggested testing includes
<code class="docutils literal notranslate"><span class="pre">RNEA</span> <span class="pre">(ID)</span></code>, <code class="docutils literal notranslate"><span class="pre">HandC</span></code>, <code class="docutils literal notranslate"><span class="pre">Hinverse</span></code>, and more.</p>
</section>
<section id="dependencies-and-installation">
<h2>Dependencies and Installation<a class="headerlink" href="#dependencies-and-installation" title="Link to this heading">#</a></h2>
<p>The only external dependency is <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, which can be automatically installed by running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>This package also depends on our
<a class="reference external" href="https://github.com/robot-acceleration/URDFParser">URDFParser</a> package.</p>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">#</a></h2>
<p>The following sections provide an overview of each function, including its purpose, parameters, return values, and example usage.</p>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">robotObj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#init__" title="Link to this definition">#</a></dt>
<dd><section id="description">
<h3>Description<a class="headerlink" href="#description" title="Link to this heading">#</a></h3>
<p>Initializes the <cite>RBDReference</cite> class, associating it with a given robot object.</p>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>robotObj</strong><span class="classifier"><em>object</em></span></dt><dd><p>The robot object to associate with this reference. It should represent a multibody system.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="returns">
<h3>Returns<a class="headerlink" href="#returns" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>None</strong><span class="classifier"><em>None</em></span></dt><dd><p>This function does not return a value.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">robot_obj</span> <span class="o">=</span> <span class="n">SomeRobotObject</span><span class="p">()</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="cross_operator">
<span class="sig-name descname"><span class="pre">cross_operator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cross_operator" title="Link to this definition">#</a></dt>
<dd><section id="id1">
<h3>Description<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Computes the cross product operator for a given vector <cite>v</cite>.</p>
</section>
<section id="id2">
<h3>Parameters<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A vector representing the spatial velocity (or any other relevant quantity) to compute the cross product operator.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id3">
<h3>Returns<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A 6x6 matrix representing the cross product operator of the input vector.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id4">
<h3>Example<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">cross_operator</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="dual_cross_operator">
<span class="sig-name descname"><span class="pre">dual_cross_operator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dual_cross_operator" title="Link to this definition">#</a></dt>
<dd><section id="id5">
<h3>Description<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>Computes the dual cross product operator for a given vector <cite>v</cite>.</p>
</section>
<section id="id6">
<h3>Parameters<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A vector representing the spatial velocity (or any other relevant quantity) to compute the dual cross product operator.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id7">
<h3>Returns<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A 6x6 matrix representing the dual cross product operator of the input vector.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id8">
<h3>Example<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">dual_cross_operator</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="icrf">
<span class="sig-name descname"><span class="pre">icrf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#icrf" title="Link to this definition">#</a></dt>
<dd><section id="id9">
<h3>Description<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>Computes the inverse cross product matrix for a vector <cite>v</cite>.</p>
</section>
<section id="id10">
<h3>Parameters<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A vector representing the spatial velocity (or any other relevant quantity).</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id11">
<h3>Returns<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A 6x6 matrix representing the inverse cross product matrix for the input vector.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id12">
<h3>Example<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">icrf</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="factor_functions">
<span class="sig-name descname"><span class="pre">factor_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">I</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#factor_functions" title="Link to this definition">#</a></dt>
<dd><section id="id13">
<h3>Description<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p>Computes a factor function for the system, which is used in various multibody dynamics algorithms.</p>
</section>
<section id="id14">
<h3>Parameters<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>I</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The inertia matrix for the system.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The velocity vector for the system.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>number</strong><span class="classifier"><em>int, optional</em></span></dt><dd><p>A number that selects which formula to use (default is 3).</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id15">
<h3>Returns<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The resulting factor matrix for the system.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id16">
<h3>Example<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">factor_functions</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="mxS">
<span class="sig-name descname"><span class="pre">_mxS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxS" title="Link to this definition">#</a></dt>
<dd><section id="id17">
<h3>Description<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<p>Computes the spatial cross product between vectors <cite>S</cite> and <cite>vec</cite>.</p>
</section>
<section id="id18">
<h3>Parameters<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>S</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The first vector (spatial motion vector).</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>vec</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The second vector (spatial force or other relevant vector).</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>alpha</strong><span class="classifier"><em>float, optional</em></span></dt><dd><p>A scaling factor for the operation (default is 1.0).</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id19">
<h3>Returns<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The result of the spatial cross product.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id20">
<h3>Example<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">_mxS</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">vec</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">mxS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Link to this definition">#</a></dt>
<dd><section id="id21">
<h3>Description<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<p>Computes the spatial cross product for a given set of vectors <cite>S</cite> and <cite>vec</cite>.</p>
</section>
<section id="id22">
<h3>Parameters<a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>S</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A vector representing the spatial motion.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>vec</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A vector representing the spatial velocity or force.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id23">
<h3>Returns<a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The resulting spatial cross product.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id24">
<h3>Example<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">mxS</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">vec</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="fxv">
<span class="sig-name descname"><span class="pre">fxv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fxVec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timesVec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxv" title="Link to this definition">#</a></dt>
<dd><section id="id25">
<h3>Description<a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<p>Computes the result of multiplying two vectors <cite>fxVec</cite> and <cite>timesVec</cite> using spatial operations.</p>
</section>
<section id="id26">
<h3>Parameters<a class="headerlink" href="#id26" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>fxVec</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The first vector to be used in the operation.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>timesVec</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The second vector to be used in the operation.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id27">
<h3>Returns<a class="headerlink" href="#id27" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The resulting vector after applying the spatial cross product.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id28">
<h3>Example<a class="headerlink" href="#id28" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">fxVec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">timesVec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">fxv</span><span class="p">(</span><span class="n">fxVec</span><span class="p">,</span> <span class="n">timesVec</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="fxS">
<span class="sig-name descname"><span class="pre">fxS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxS" title="Link to this definition">#</a></dt>
<dd><section id="id29">
<h3>Description<a class="headerlink" href="#id29" title="Link to this heading">#</a></h3>
<p>Computes the spatial cross product between a matrix <cite>S</cite> and a vector <cite>vec</cite>.</p>
</section>
<section id="id30">
<h3>Parameters<a class="headerlink" href="#id30" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>S</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The matrix to apply the spatial cross product on.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>vec</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The vector to apply the spatial cross product with.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>alpha</strong><span class="classifier"><em>float, optional</em></span></dt><dd><p>A scaling factor for the operation (default is 1.0).</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id31">
<h3>Returns<a class="headerlink" href="#id31" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The resulting spatial cross product.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id32">
<h3>Example<a class="headerlink" href="#id32" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">fxS</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">vec</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="vxIv">
<span class="sig-name descname"><span class="pre">vxIv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Imat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vxIv" title="Link to this definition">#</a></dt>
<dd><section id="id33">
<h3>Description<a class="headerlink" href="#id33" title="Link to this heading">#</a></h3>
<p>Computes the result of multiplying a vector <cite>vec</cite> by an inertia matrix <cite>Imat</cite> using spatial operations.</p>
</section>
<section id="id34">
<h3>Parameters<a class="headerlink" href="#id34" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>vec</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>A vector to be multiplied by the inertia matrix.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>Imat</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The inertia matrix to multiply the vector with.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id35">
<h3>Returns<a class="headerlink" href="#id35" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>result</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The resulting vector after the multiplication.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id36">
<h3>Example<a class="headerlink" href="#id36" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">Imat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">vxIv</span><span class="p">(</span><span class="n">vec</span><span class="p">,</span> <span class="n">Imat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="apply_external_forces">
<span class="sig-name descname"><span class="pre">apply_external_forces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_ext</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#apply_external_forces" title="Link to this definition">#</a></dt>
<dd><section id="id37">
<h3>Description<a class="headerlink" href="#id37" title="Link to this heading">#</a></h3>
<p>Subtracts external forces from the input forces, applying the external forces to the system. This method takes the structure of either a 6/3xNB matrix or a shortened planar vector with length == NB, where <cite>f[i]</cite> corresponds to the force applied to body <cite>i</cite>.</p>
</section>
<section id="id38">
<h3>Parameters<a class="headerlink" href="#id38" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>f_in</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The initial forces applied to links.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f_ext</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The external forces to subtract.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id39">
<h3>Returns<a class="headerlink" href="#id39" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>f_out</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The updated forces after applying the external forces.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id40">
<h3>Example<a class="headerlink" href="#id40" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">f_in</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">f_ext</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">apply_external_forces</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">f_in</span><span class="p">,</span> <span class="n">f_ext</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="rnea_fpass">
<span class="sig-name descname"><span class="pre">rnea_fpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qdd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GRAVITY</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-9.81</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rnea_fpass" title="Link to this definition">#</a></dt>
<dd><section id="id41">
<h3>Description<a class="headerlink" href="#id41" title="Link to this heading">#</a></h3>
<p>Performs the forward pass of the Recursive Newton-Euler Algorithm (RNEA) for computing spatial velocities, accelerations, and forces.</p>
</section>
<section id="id42">
<h3>Parameters<a class="headerlink" href="#id42" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>q</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint positions of the robot.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>qd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>qdd</strong><span class="classifier"><em>ndarray</em>, optional</span></dt><dd><p>The joint accelerations.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>GRAVITY</strong><span class="classifier"><em>float</em>, optional</span></dt><dd><p>The gravitational constant. Default is -9.81.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id43">
<h3>Returns<a class="headerlink" href="#id43" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>a</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial accelerations.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial forces.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id44">
<h3>Example<a class="headerlink" href="#id44" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">qd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">rnea_fpass</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">qd</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="rnea_bpass">
<span class="sig-name descname"><span class="pre">rnea_bpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rnea_bpass" title="Link to this definition">#</a></dt>
<dd><section id="id45">
<h3>Description<a class="headerlink" href="#id45" title="Link to this heading">#</a></h3>
<p>Performs the backward pass of the Recursive Newton-Euler Algorithm (RNEA), computing joint forces.</p>
</section>
<section id="id46">
<h3>Parameters<a class="headerlink" href="#id46" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>q</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint positions.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial forces.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id47">
<h3>Returns<a class="headerlink" href="#id47" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>c</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The computed joint forces.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The updated spatial forces.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id48">
<h3>Example<a class="headerlink" href="#id48" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">c</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">rnea_bpass</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="rnea">
<span class="sig-name descname"><span class="pre">rnea</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qdd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GRAVITY</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-9.81</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rnea" title="Link to this definition">#</a></dt>
<dd><section id="id49">
<h3>Description<a class="headerlink" href="#id49" title="Link to this heading">#</a></h3>
<p>Computes the Recursive Newton-Euler Algorithm (RNEA) by performing both the forward and backward passes.</p>
</section>
<section id="id50">
<h3>Parameters<a class="headerlink" href="#id50" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>q</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint positions of the robot.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>qd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>qdd</strong><span class="classifier"><em>ndarray</em>, optional</span></dt><dd><p>The joint accelerations.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>GRAVITY</strong><span class="classifier"><em>float</em>, optional</span></dt><dd><p>The gravitational constant. Default is -9.81.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f_ext</strong><span class="classifier"><em>ndarray</em>, optional</span></dt><dd><p>The external forces to apply.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id51">
<h3>Returns<a class="headerlink" href="#id51" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>c</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The computed joint forces.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>a</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial accelerations.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial forces.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id52">
<h3>Example<a class="headerlink" href="#id52" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">qd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">c</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">rnea</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">qd</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="rnea_grad_fpass_dq">
<span class="sig-name descname"><span class="pre">rnea_grad_fpass_dq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GRAVITY</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-9.81</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rnea_grad_fpass_dq" title="Link to this definition">#</a></dt>
<dd><section id="id53">
<h3>Description<a class="headerlink" href="#id53" title="Link to this heading">#</a></h3>
<p>Computes the forward pass gradient of the Recursive Newton-Euler Algorithm (RNEA) with respect to joint positions.</p>
</section>
<section id="id54">
<h3>Parameters<a class="headerlink" href="#id54" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>q</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint positions.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>qd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>a</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial accelerations.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>GRAVITY</strong><span class="classifier"><em>float</em>, optional</span></dt><dd><p>The gravitational constant. Default is -9.81.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id55">
<h3>Returns<a class="headerlink" href="#id55" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>dv_dq</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The derivative of spatial velocities with respect to joint positions.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>da_dq</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The derivative of spatial accelerations with respect to joint positions.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>df_dq</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The derivative of spatial forces with respect to joint positions.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id56">
<h3>Example<a class="headerlink" href="#id56" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">qd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">dv_dq</span><span class="p">,</span> <span class="n">da_dq</span><span class="p">,</span> <span class="n">df_dq</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">rnea_grad_fpass_dq</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">qd</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dv_dq</span><span class="p">,</span> <span class="n">da_dq</span><span class="p">,</span> <span class="n">df_dq</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="rnea_grad_fpass_dqd">
<span class="sig-name descname"><span class="pre">rnea_grad_fpass_dqd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rnea_grad_fpass_dqd" title="Link to this definition">#</a></dt>
<dd><section id="id57">
<h3>Description<a class="headerlink" href="#id57" title="Link to this heading">#</a></h3>
<p>Computes the forward pass gradient of the Recursive Newton-Euler Algorithm (RNEA) with respect to joint velocities.</p>
</section>
<section id="id58">
<h3>Parameters<a class="headerlink" href="#id58" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>q</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint positions.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>qd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>v</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial velocities.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id59">
<h3>Returns<a class="headerlink" href="#id59" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>dv_dqd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The gradient of spatial velocities with respect to joint velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>da_dqd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The gradient of spatial accelerations with respect to joint velocities.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>df_dqd</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The gradient of spatial forces with respect to joint velocities.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id60">
<h3>Example<a class="headerlink" href="#id60" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">qd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">dv_dqd</span><span class="p">,</span> <span class="n">da_dqd</span><span class="p">,</span> <span class="n">df_dqd</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">rnea_grad_fpass_dqd</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">qd</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dv_dqd</span><span class="p">,</span> <span class="n">da_dqd</span><span class="p">,</span> <span class="n">df_dqd</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="rnea_grad_bpass_dq">
<span class="sig-name descname"><span class="pre">rnea_grad_bpass_dq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_dq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rnea_grad_bpass_dq" title="Link to this definition">#</a></dt>
<dd><section id="id61">
<h3>Description<a class="headerlink" href="#id61" title="Link to this heading">#</a></h3>
<p>Computes the backward pass gradient of the Recursive Newton-Euler Algorithm (RNEA) with respect to joint positions.</p>
</section>
<section id="id62">
<h3>Parameters<a class="headerlink" href="#id62" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>q</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The joint positions.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>f</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The spatial forces.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>df_dq</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The gradient of joint forces with respect to joint positions.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id63">
<h3>Returns<a class="headerlink" href="#id63" title="Link to this heading">#</a></h3>
<ul>
<li><dl>
<dt><strong>dc_dq</strong><span class="classifier"><em>ndarray</em></span></dt><dd><p>The gradient of RNEA with respect to joint positions.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id64">
<h3>Example<a class="headerlink" href="#id64" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">your_module</span> <span class="kn">import</span> <span class="n">RBDReference</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">df_dq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">rbd_ref</span> <span class="o">=</span> <span class="n">RBDReference</span><span class="p">(</span><span class="n">robot_obj</span><span class="p">)</span>
<span class="n">dc_dq</span> <span class="o">=</span> <span class="n">rbd_ref</span><span class="o">.</span><span class="n">rnea_grad_bpass_dq</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="additional-resources">
<h2>Additional Resources<a class="headerlink" href="#additional-resources" title="Link to this heading">#</a></h2>
<p>For more information on how to use this package, please see:
- <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx Documentation</a></p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">API Reference</p>
      </div>
    </a>
    <a class="right-next"
       href="urdf.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">URDFParser</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-and-api">Usage and API:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-algorithms-on-urdfs">Testing Algorithms on URDFs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies-and-installation">Dependencies and Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#api-reference">API Reference</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cross_operator"><code class="docutils literal notranslate"><span class="pre">cross_operator()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dual_cross_operator"><code class="docutils literal notranslate"><span class="pre">dual_cross_operator()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#icrf"><code class="docutils literal notranslate"><span class="pre">icrf()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#factor_functions"><code class="docutils literal notranslate"><span class="pre">factor_functions()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mxS"><code class="docutils literal notranslate"><span class="pre">_mxS()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id0"><code class="docutils literal notranslate"><span class="pre">mxS()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fxv"><code class="docutils literal notranslate"><span class="pre">fxv()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fxS"><code class="docutils literal notranslate"><span class="pre">fxS()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vxIv"><code class="docutils literal notranslate"><span class="pre">vxIv()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apply_external_forces"><code class="docutils literal notranslate"><span class="pre">apply_external_forces()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rnea_fpass"><code class="docutils literal notranslate"><span class="pre">rnea_fpass()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rnea_bpass"><code class="docutils literal notranslate"><span class="pre">rnea_bpass()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rnea"><code class="docutils literal notranslate"><span class="pre">rnea()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rnea_grad_fpass_dq"><code class="docutils literal notranslate"><span class="pre">rnea_grad_fpass_dq()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rnea_grad_fpass_dqd"><code class="docutils literal notranslate"><span class="pre">rnea_grad_fpass_dqd()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rnea_grad_bpass_dq"><code class="docutils literal notranslate"><span class="pre">rnea_grad_bpass_dq()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-resources">Additional Resources</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/kawotwi/GRiD/edit/main/docs/source/api_reference/rbd.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/api_reference/rbd.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2024, Kwamena Awotwi, Zachary Pestrikov, Danelle Tuchman, Abhinav Sharma, Brian Plancher.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>